---
layout: couch
title: couch-fuse
github_name: couch-fuse
current_version: 0.3
nav:
  - name: What
    link: "#what"
  - name: Why
    link: "#why"
  - name: Usage
    link: "#usage"
  - name: Demo
    link: "#demo"
  - name: Options
    link: "#options"
  - name: Installing
    link: "#installing"
  - name: Building
    link: "#building"
---

h2(project_name). {{ page.github_name }}

h3(#what). What

Couchfuse is a FUSE filesystem that exposes Couchdb databases as filesystem folder.

h3(#why). Why

Couchdb exposes an easy to use HTTP API however for some tasks using a filesystem UI is preferable, easy backup using rsync or text editing using your favorite text editor.

h3(#usage). Usage

We start by mouting a db:

{% highlight bash %}

$ couchfuse -db db_name -path mount_path

{% endhighlight %}

Creating a new document is mkdir away:

{% highlight bash %}

$ mkdir mount_path/foo

{% endhighlight %}

Each document is represented by two folders, a content folder which contains attachments and a meta folder that hold the document json:

{% highlight bash %}

$ find mount_path/
    mount_path/.foo/foo.json
    mount_path/foo

{% endhighlight %}

In order to delete a document both content and meta folder should be cleared, starting with content folder first:

{% highlight bash %}

$ rm -r mount_path/.foo
  rm: cannot remove directory 'fake/.foo': Operation not permitted
# this will work
$ rm -r mount_path/foo && rm -r mount_path/.foo

{% endhighlight %}

h3(#demo). Demo

<object width="480" height="385"><param name="movie" value="http://www.youtube.com/v/PxD9SroHhWE?fs=1&amp;hl=en_US"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/PxD9SroHhWE?fs=1&amp;hl=en_US" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="480" height="385"></embed></object>

h3(#options). Options

{% highlight bash %}
Options
  --run-valid   runs validation only                                            
  --host <arg>  Couchdb host name               [default http://127.0.0.1:5984/]
  --db <arg>    Couchdb db name                                                 
  --path <arg>  Mount path on local filesystem  
  --help        print options
{% endhighlight %}

h3(#installing). Installing

{% highlight bash %}

$ wget http://github.com/downloads/narkisr/couch-fuse/couch-fuse_0.3-1_amd64.deb
$ sudo dpkg -i couch-fuse_0.3-1_amd64.deb
# if java and fuse-utils are not installed already
$ sudo apt -f install

{% endhighlight %}

Deb packages are available:

table{border:5px hidden black}.
|_. 32bit |_. 64bit |
|<. "!{width:50px;height:50px}images/deb.png!":http://github.com/downloads/narkisr/couch-fuse/couch-fuse_0.3-1_i386.deb|<. "!{width:50px;height:50px}images/deb.png!":http://github.com/downloads/narkisr/couch-fuse/couch-fuse_0.3-1_amd64.deb|

h3(#building). Building

On ubuntu 10.04 64 and 32 bit 

{% highlight bash %}

$ sudo aptitude install dh-make libfuse-dev sun-java6-jdk maven2 ruby rake couchdb curl
$ git clone git://github.com/narkisr/fuse4j.git
$ cd fuse4j/maven
$ mvn clean install 
$ cd ..
$ git clone git://github.com/narkisr/couch-fuse.git
$ cd couch-fuse
$ rake deb

{% endhighlight %}
